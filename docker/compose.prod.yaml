---
services:
  server:
    build:
      context: ..
      dockerfile: ./docker/dockerfile
      target: production
      secrets:
        - source: kaggle_json
        - source: google_tracking_id
    image: acederberg/blog:${ACEDERBERG_IO_SERVER_VERSION-0.2.0}
    ports:
      - published: 8080
        target: 8080
    tty: true

secrets:
  kaggle_json:
    file: ../config/kaggle/kaggle.json
    external: true
  google_tracking_id:
    environment: ACEDERBERG_IO_GOOGLE_TRACKING_ID
    external: true

